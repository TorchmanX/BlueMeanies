<!DOCTYPE html>
<html>
<head>
  <style>
    .active { fill: blue !important;}
          /*.datamaps-key dt, .datamaps-key dd {float: none !important;}
          .datamaps-key {right: -50px; top: 0;}*/
        </style>
      </head>
      <body>

        <div id="container1" style="margin: 0 auto;width: 700px; height: 475px; position: relative;">
          <span style='background:rgba( 255, 158, 0,0.7);'> Finance</span>
          <span style='background:rgba(0, 158, 206,0.7);'> Welfare</span>
          <span style='background:rgba(156, 207, 49,0.7);'> Traffic</span>
          <span style='background:rgba(206, 0, 0,0.7);'> Catastrophe</span>
        </div>
        <script src="../../src/js/components/d3/d3.min.js"></script>
        <script src="../../src/js/components/topojson/topojson.js"></script>
        <!-- <script src="/src/js/json2.js"></script> -->
        <script src="../../dist/datamaps.none.min.js"></script>
        <script>

          var election = new Datamap({
            scope: 'county',
            element: document.getElementById('container1'),
            geographyConfig: {
          dataUrl: "county.json",
              popupOnHover: false,
              highlightOnHover: false,
              borderColor: '#444',
              borderWidth: 0.5
            },
    setProjection: function (element, options){
  var projection = d3.geo.mercator().center([121.73,25.04]).scale(35000);
  var path = d3.geo.path().projection(projection);
  return {path: path, projection: projection};
},
            bubblesConfig: {
              popupTemplate: function(geography, data) {
                return '<div class="hoverinfo">'
                +"<p>Latitude : "+data.latitude+"</p>"
                +"<p>Longitude : "+data.longitude
                +"<p>Category : "+data.fillKey+"</p>"
                +'</div>'
              },
              fillOpacity: 0.2
            },
            fills: {
              'Finance': '#FF9E00', 
              'Welfare': '#009ECE',
              'Traffic': '#9CCF31',
              'Catastrophe': '#CE0000',
              defaultFill: '#dddddd'
            }
          });

  election.bubbles([{
  latitude: 25.062635,
  longitude: 121.590181,
  fillKey: "Catastrophe",
  radius: 2
},{
  latitude: 25.152635,
  longitude: 121.545181,
  fillKey: "Welfare",
  radius: 10
},{
  latitude: 24.997635,
  longitude: 121.485181,
  fillKey: "Traffic",
  radius: 6
},{
  latitude: 25.042635,
  longitude: 121.53,
  fillKey: "Finance",
  radius: 8
}
]);

 
var i=1;
var arr=[2,10,6,8];
var max=0.2;
var min=0.5;
var t=setInterval(function(){ 
i++
if (i>7){
  clearInterval(t);
}


 d3.selectAll("circle").transition()
     .duration(Math.random()*1000)
  .delay(Math.random()*2000)
  .attr("r", function(d,it){
    return Math.floor(Math.random() * (max - min + 1)) + min*i*arr[it];
  } );


 }, 1500);


</script>
</body>
</html>
